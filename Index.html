<html class="scroll-smooth" lang="pt-BR">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   DoisR Barber Shop
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
    font-family: "Inter", sans-serif;
   }
   /* Hide scrollbar for all browsers */
   .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
   }
   .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
   }
   /* Splash overlay */
   #splashOverlay {
    background-color: rgba(0, 0, 0, 0.7);
    position: fixed;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 50;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
   }
   #splashOverlay.show {
    opacity: 1;
    pointer-events: all;
   }
   /* Spin animation */
   @keyframes spin {
    0% {
     transform: rotate(0deg);
    }
    100% {
     transform: rotate(360deg);
    }
   }
   #splashOverlay img {
    width: 80px;
    height: 80px;
    animation: spin 1s linear infinite;
   }
   /* Sidebar cart */
   #cartSidebar {
    position: fixed;
    top: 0;
    right: 0;
    width: 320px;
    height: 100vh;
    background-color: #111827; /* Tailwind gray-900 */
    color: white;
    box-shadow: -4px 0 8px rgba(0, 0, 0, 0.3);
    z-index: 60;
    transition: transform 0.3s ease;
    display: flex;
    flex-direction: column;
    padding: 1rem;
    transform: translateX(100%);
  }
  #cartSidebar.open {
    transform: translateX(0);
  }
  #cartSidebar header {
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  #cartSidebar header button {
    background: transparent;
    border: none;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
  }
  #cartItems {
    flex: 1;
    overflow-y: auto;
    margin-bottom: 1rem;
  }
  #cartItems .cart-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.75rem;
    border-bottom: 1px solid #374151; /* Tailwind gray-700 */
    padding-bottom: 0.5rem;
  }
  #cartItems .cart-item-name {
    font-weight: 600;
  }
  #cartItems .cart-item-qty {
    margin-left: 0.5rem;
    color: #9ca3af; /* Tailwind gray-400 */
  }
  #cartItems .cart-item-price {
    font-weight: 600;
  }
  #cartTotal {
    font-weight: 700;
    font-size: 1.125rem;
    border-top: 1px solid #374151;
    padding-top: 0.75rem;
    text-align: right;
  }
  #cartSidebar footer button {
    width: 100%;
    background: linear-gradient(to right, #06b6d4, #84cc16);
    color: white;
    font-weight: 700;
    padding: 0.75rem;
    border-radius: 9999px;
    cursor: pointer;
    font-size: 1rem;
  }
  /* Overlay behind sidebar */
  #sidebarOverlay {
    position: fixed;
    inset: 0;
    background-color: rgba(0,0,0,0.5);
    z-index: 55;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  #sidebarOverlay.show {
    opacity: 1;
    pointer-events: all;
  }
  /* Scrollbar for cart items */
  #cartItems::-webkit-scrollbar {
    width: 6px;
  }
  #cartItems::-webkit-scrollbar-thumb {
    background-color: #4b5563; /* Tailwind gray-600 */
    border-radius: 3px;
  }
  #cartItems::-webkit-scrollbar-track {
    background-color: transparent;
  }
  /* Responsive adjustments */
  @media (max-width: 400px) {
    #cartSidebar {
      width: 100vw;
    }
  }
  /* Hide footer when sidebar open */
  footer.hidden {
    display: none !important;
  }
  /* Modal for scheduling */
  #scheduleModal {
    position: fixed;
    inset: 0;
    background-color: rgba(0,0,0,0.6);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 70;
  }
  #scheduleModal.show {
    display: flex;
  }
  #scheduleModalContent {
    background: white;
    border-radius: 1rem;
    max-width: 320px;
    width: 90%;
    padding: 1rem;
    max-height: 80vh;
    overflow-y: auto;
  }
  #scheduleModalContent h3 {
    font-weight: 700;
    margin-bottom: 0.5rem;
    font-size: 1.125rem;
    color: #111827;
  }
  #scheduleModalContent ul {
    list-style: none;
    padding: 0;
    margin: 0 0 1rem 0;
    display: flex;
    flex-wrap: nowrap;
    gap: 0.25rem;
    overflow-x: auto;
  }
  #scheduleModalContent ul li {
    padding: 0.25rem 0.5rem;
    border-radius: 0.5rem;
    cursor: pointer;
    color: white;
    font-weight: 600;
    font-size: 0.75rem;
    text-align: center;
    min-width: 70px;
    user-select: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    white-space: nowrap;
    flex-shrink: 0;
  }
  #scheduleModalContent ul li.available {
    background-color: #22c55e; /* green-500 */
  }
  #scheduleModalContent ul li.booked {
    background-color: #eab308; /* yellow-400 */
    color: #1e293b; /* gray-800 for contrast */
  }
  #scheduleModalContent ul li.busy {
    background-color: #3b82f6; /* blue-500 */
  }
  #scheduleModalContent ul li:hover {
    filter: brightness(0.85);
  }
  #scheduleModalContent ul li .status-text {
    font-size: 0.6rem;
    margin-top: 0.1rem;
    font-weight: 500;
  }
  #scheduleModalContent ul li.available .status-text {
    color: #d9f99d; /* lighter green */
  }
  #scheduleModalContent ul li.booked .status-text {
    color: #fef08a; /* lighter yellow */
  }
  #scheduleModalContent ul li.busy .status-text {
    color: #93c5fd; /* lighter blue */
  }
  #scheduleModalContent button.closeBtn {
    background: linear-gradient(to right, #06b6d4, #84cc16);
    color: white;
    font-weight: 700;
    padding: 0.5rem 1rem;
    border-radius: 9999px;
    cursor: pointer;
    width: 100%;
    font-size: 1rem;
  }
  /* Footer with trash icon next to "Ver Carrinho" */
  #pageFooter {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background-color: #000;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 0.5rem 1rem;
    border-top-left-radius: 1.5rem;
    border-top-right-radius: 1.5rem;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: white;
    z-index: 30;
  }
  #pageFooter .icon-button {
    cursor: pointer;
    color: #ef4444; /* red */
    font-size: 1.75rem;
    padding: 0.25rem;
    transition: color 0.2s ease;
  }
  #pageFooter .icon-button:hover {
    color: #f87171; /* lighter red */
  }
  #pageFooter .cart-info {
    flex: 1;
    text-align: center;
    font-weight: 700;
    font-size: 1.25rem;
    color: white;
  }
  #pageFooter #viewCartBtn {
    background: linear-gradient(to right, #06b6d4, #84cc16);
    color: white;
    font-weight: 700;
    border-radius: 9999px;
    padding: 0.5rem 1rem;
    white-space: nowrap;
    cursor: pointer;
    font-size: 1rem;
  }
  #pageFooter .cart-summary {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    flex: 1;
    justify-content: center;
    color: white;
    font-weight: 700;
    font-size: 1.25rem;
  }
  #pageFooter .cart-summary > div {
    white-space: nowrap;
  }
  /* Cards container */
  .cards-container {
    display: flex;
    gap: 0.5rem;
    overflow-x: auto;
    padding-bottom: 0.5rem;
    scrollbar-width: none;
  }
  .cards-container::-webkit-scrollbar {
    display: none;
  }
  /* Card styles */
  .card {
    background: white;
    border-radius: 0.75rem;
    padding: 0.75rem;
    min-width: 96px;
    flex-shrink: 0;
    cursor: pointer;
    box-shadow: 0 1px 3px rgb(0 0 0 / 0.1);
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 0.75rem;
    font-weight: 600;
    text-align: center;
  }
  .card .status-text {
    margin-top: 0.25rem;
    font-weight: 500;
  }
  .available {
    background-color: #22c55e; /* green-500 */
    color: white;
  }
  .available .status-text {
    color: #d9f99d; /* lighter green */
  }
  .booked {
    background-color: #eab308; /* yellow-400 */
    color: #1e293b; /* gray-800 */
  }
  .booked .status-text {
    color: #fef08a; /* lighter yellow */
  }
  .busy {
    background-color: #3b82f6; /* blue-500 */
    color: white;
  }
  .busy .status-text {
    color: #93c5fd; /* lighter blue */
  }
  .card:hover {
    filter: brightness(0.9);
  }
  /* Reduced spacing between sections */
  header.bg-black {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }
  section.mx-2.mt-4.bg-white {
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
    height: 5rem !important;
  }
  nav#navButtons {
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  section#servicesSection {
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  section#barberShopSection {
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  section#promoSection {
    margin-top: 0.75rem !important;
    margin-bottom: 1rem !important;
  }
  /* Promo cards with orange offer banner */
  #promoContainer .card {
    position: relative;
    padding-top: 1.5rem;
    min-width: 96px;
  }
  #promoContainer .card::before {
    content: "OFERTA R$ 35";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    background-color: #fb923c; /* orange-400 */
    color: white;
    font-weight: 700;
    font-size: 0.65rem;
    text-align: center;
    padding: 0.2rem 0;
    border-top-left-radius: 0.75rem;
    border-top-right-radius: 0.75rem;
  }
  #promoContainer .card img {
    margin-top: 0.25rem;
    border-bottom-left-radius: 0.75rem;
    border-bottom-right-radius: 0.75rem;
  }
  #promoContainer .card button {
    margin-top: 0.25rem;
  }
  /* Responsive adjustments for smaller screens */
  @media (max-width: 640px) {
    header.bg-black {
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
    }
    section.mx-2.mt-4.bg-white {
      height: 4rem !important;
      margin-top: 0.5rem !important;
      margin-bottom: 0.5rem !important;
    }
    nav#navButtons {
      margin-top: 0.5rem !important;
      margin-bottom: 0.5rem !important;
    }
    section#servicesSection {
      margin-top: 0.5rem !important;
      margin-bottom: 0.5rem !important;
    }
    section#barberShopSection {
      margin-top: 0.5rem !important;
      margin-bottom: 0.5rem !important;
    }
    section#promoSection {
      margin-top: 0.75rem !important;
      margin-bottom: 1rem !important;
    }
  }
  @media (max-width: 400px) {
    section.mx-2.mt-4.bg-white {
      height: 3.5rem !important;
    }
  }
  /* Logo image round and no background */
  #logoImg {
    border-radius: 9999px;
    background: none !important;
    object-fit: cover;
  }
  </style>
 </head>
 <body class="bg-gray-200 min-h-screen flex flex-col justify-between">
  <!-- Splash overlay -->
  <div aria-hidden="true" id="splashOverlay">
   <img alt="Logo DoisR Barber Shop girando" height="80" id="logoImg" src="/images/Logo.png" width="80"/>
  </div>
  <!-- Sidebar cart -->
  <aside aria-label="Carrinho de compras" aria-modal="true" id="cartSidebar" role="dialog" tabindex="-1">
   <header>
    <span>
     Carrinho
    </span>
    <button aria-label="Fechar carrinho" id="closeCartBtn">
     ×
    </button>
   </header>
   <div aria-live="polite" aria-relevant="additions removals" id="cartItems" tabindex="0">
    <p class="text-gray-400 text-center">
     Seu carrinho está vazio.
    </p>
   </div>
   <div id="cartTotal">
    Total: R$ 0,00
   </div>
   <footer>
    <button id="checkoutBtn" type="button">
     Finalizar Compra
    </button>
   </footer>
  </aside>
  <div id="sidebarOverlay" tabindex="-1">
  </div>
  <!-- Schedule Modal -->
  <div aria-labelledby="scheduleTitle" aria-modal="true" id="scheduleModal" role="dialog" tabindex="-1">
   <div id="scheduleModalContent">
    <h3 id="scheduleTitle">
     Selecione uma data e horário
    </h3>
    <ul aria-label="Lista de datas e horários disponíveis para agendamento" class="cards-container" id="scheduleList" tabindex="0">
     <!-- Dates and times will be inserted here -->
    </ul>
    <button aria-label="Fechar agendamento" class="closeBtn" id="closeScheduleBtn">
     Fechar
    </button>
   </div>
  </div>
  <!-- Top black header -->
  <header class="bg-black flex items-center justify-between px-2 py-1 rounded-b-3xl relative z-20">
   <div class="flex items-center justify-center w-10 h-10 rounded-full font-bold text-black text-[10px] overflow-hidden">
    <img alt="Logo DoisR Barber Shop" class="w-full h-full object-cover" height="40" id="logoImg" src="/images/Logo.png" width="40"/>
   </div>
   <div class="flex items-center justify-center w-32 h-10 font-semibold text-black text-xs">
    <img alt="Título DoisR Barber Shop" class="w-28 h-8 object-contain" height="32" src="/images/Título.png" width="112"/>
   </div>
   <div class="relative cursor-pointer text-white text-2xl" id="cartIcon" title="Ver Carrinho">
    <i class="fas fa-shopping-cart">
    </i>
    <span class="absolute -top-2 -right-2 bg-red-600 rounded-full text-xs w-5 h-5 flex items-center justify-center font-bold" id="cartCount">
     0
    </span>
   </div>
  </header>
  <!-- Banner -->
  <section class="mx-2 mt-2 bg-white rounded-3xl h-20 flex items-center justify-center font-bold text-black text-xs">
   <img alt="Banner promocional DoisR Barber Shop" class="w-full h-full object-contain rounded-3xl" height="80" src="/images/Banner.png" width="320"/>
  </section>
  <!-- Navigation buttons -->
  <nav class="flex justify-start mx-2 mt-2 gap-1 overflow-x-auto scrollbar-hide" id="navButtons">
   <!-- Buttons loaded dynamically -->
  </nav>
  <!-- Services Section -->
  <section class="mx-2 mt-2 space-y-1" id="servicesSection">
   <div>
    <p class="font-bold text-black text-[11px] leading-tight">
     Escolha seu serviço:
    </p>
    <p class="font-extrabold text-gray-600 text-[12px] leading-tight">
     Os mais populares na DoisR
    </p>
   </div>
   <div class="flex gap-0.5 overflow-x-auto scrollbar-hide pb-1" id="servicesContainer">
    <!-- Service cards loaded dynamically -->
   </div>
  </section>
  <!-- Barber Shop Items -->
  <section class="mx-2 mt-2 space-y-2" id="barberShopSection">
   <div>
    <p class="font-bold text-black text-xs leading-tight">
     Escolha itens do Barber Shop:
    </p>
    <p class="font-extrabold text-gray-600 text-sm leading-tight">
     O melhor do estilo Streetwear
    </p>
   </div>
   <div class="flex gap-2 overflow-x-auto scrollbar-hide pb-2" id="barberShopContainer">
    <!-- Barber shop items loaded dynamically -->
   </div>
  </section>
  <!-- Promo Items -->
  <section class="mx-2 mt-1 space-y-2 pb-24" id="promoSection">
   <div>
    <p class="font-bold text-black text-xs leading-tight">
     Outros itens na Promoção:
    </p>
    <p class="font-extrabold text-gray-600 text-sm leading-tight flex items-center gap-1">
     Tudo que você precisa pra deixar na régua
     <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <line x1="4" x2="20" y1="20" y2="4">
      </line>
      <polyline points="20 4 14 4 20 10">
      </polyline>
      <line x1="14" x2="20" y1="10" y2="4">
      </line>
     </svg>
    </p>
   </div>
   <div class="flex gap-2 overflow-x-auto scrollbar-hide pb-2" id="promoContainer">
    <!-- Promo items loaded dynamically -->
   </div>
  </section>
  <!-- Footer -->
  <footer class="bg-black fixed bottom-0 left-0 w-full flex items-center justify-end px-4 py-2 rounded-t-3xl gap-3 text-sm transition-opacity duration-300" id="pageFooter">
   <div class="cart-summary">
    <div class="truncate text-white font-bold mr-4" id="cartItemsCount">
     Itens: 0
    </div>
    <div class="truncate text-white font-bold" id="cartTotalPrice">
     R$: 00,00
    </div>
   </div>
   <button aria-label="Limpar carrinho" class="icon-button text-red-600 hover:text-red-400" id="clearCartBtn" title="Limpar carrinho" type="button">
    <i class="fas fa-trash-alt text-2xl">
    </i>
   </button>
   <button class="bg-gradient-to-r from-cyan-600 to-lime-400 text-white font-bold rounded-full px-4 py-2 whitespace-nowrap shrink-0" id="viewCartBtn" type="button">
    Ver Carrinho
   </button>
  </footer>
  <script>
   // Cart data
   const cart = [];

   // Format price to BRL
   function formatPrice(value) {
    return value.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
   }

   // Update cart UI
   function updateCartUI() {
    const countEl = document.getElementById("cartCount");
    const countFooterEl = document.getElementById("cartItemsCount");
    const totalEl = document.getElementById("cartTotalPrice");
    const totalSidebarEl = document.getElementById("cartTotal");
    const cartItemsEl = document.getElementById("cartItems");
    const footerEl = document.getElementById("pageFooter");
    const sidebar = document.getElementById("cartSidebar");

    const totalItems = cart.reduce((acc, item) => acc + item.quantity, 0);
    const totalPrice = cart.reduce((acc, item) => acc + item.price * item.quantity, 0);

    countEl.textContent = totalItems;
    countFooterEl.textContent = `Itens: ${totalItems}`;
    totalEl.textContent = `R$: ${totalPrice.toFixed(2).replace(".", ",")}`;
    totalSidebarEl.textContent = `Total: ${formatPrice(totalPrice)}`;

    // Render cart items in sidebar
    if (cart.length === 0) {
     cartItemsEl.innerHTML = `<p class="text-gray-400 text-center">Seu carrinho está vazio.</p>`;
    } else {
     cartItemsEl.innerHTML = "";
     cart.forEach(item => {
      const div = document.createElement("div");
      div.className = "cart-item flex justify-between border-b border-gray-700 pb-2";
      div.innerHTML = `
        <div>
          <span class="cart-item-name">${item.name}</span><br/>
          <small class="text-gray-300">${item.schedule || ""}</small>
          <span class="cart-item-qty"> x${item.quantity}</span>
        </div>
        <div class="cart-item-price">${formatPrice(item.price * item.quantity)}</div>
      `;
      cartItemsEl.appendChild(div);
     });
    }

    // Hide footer if sidebar open
    if (sidebar.classList.contains("open")) {
     footerEl.style.opacity = "0";
     footerEl.style.pointerEvents = "none";
    } else {
     footerEl.style.opacity = "1";
     footerEl.style.pointerEvents = "auto";
    }
   }

   // Show splash
   function showSplash() {
    const splash = document.getElementById("splashOverlay");
    splash.classList.add("show");
    setTimeout(() => {
     splash.classList.remove("show");
    }, 1000);
   }

   // Add item to cart (no auto open sidebar)
   function addToCart(name, price, schedule = "") {
    // Check if item with same name and schedule exists
    const existingItem = cart.find(item => item.name === name && item.schedule === schedule);
    if (existingItem) {
     existingItem.quantity++;
    } else {
     cart.push({ name, price, quantity: 1, schedule });
    }
    updateCartUI();
    showSplash();
   }

   // Clear cart function
   function clearCart() {
    if (confirm("Tem certeza que deseja limpar o carrinho?")) {
     cart.length = 0;
     updateCartUI();
    }
   }

   // Clear cart button event
   const clearCartBtn = document.getElementById("clearCartBtn");
   clearCartBtn.addEventListener("click", clearCart);
   clearCartBtn.addEventListener("keydown", (e) => {
    if (e.key === "Enter" || e.key === " ") {
     e.preventDefault();
     clearCart();
    }
   });

   // Load schedule data from agendamento.json
   async function loadScheduleData() {
    try {
     const response = await fetch('agendamento.json');
     if (!response.ok) throw new Error('Erro ao carregar agendamento.json');
     const data = await response.json();
     return data;
    } catch (error) {
     console.error(error);
     return [];
    }
   }

   // Show schedule modal with data from JSON file
   async function showSchedule(name, price) {
    const scheduleModal = document.getElementById("scheduleModal");
    const scheduleList = document.getElementById("scheduleList");

    const data = await loadScheduleData();

    // Sort slots by date/time ascending (closest first)
    data.sort((a, b) => new Date(a.slot) - new Date(b.slot));

    // Clear previous list
    scheduleList.innerHTML = "";

    // Populate list with slots and status colors + status text
    data.forEach(({ slot, status, statusText }) => {
     const li = document.createElement("li");
     // Format date/time to DD/MM HH:mm
     const dt = new Date(slot);
     const formatted = dt.toLocaleDateString("pt-BR", { day: "2-digit", month: "2-digit" }) + " " + dt.toLocaleTimeString("pt-BR", { hour: "2-digit", minute: "2-digit" });
     li.classList.add(status);
     li.tabIndex = 0;
     li.setAttribute("role", "button");

     // Create main text and status text elements
     const mainText = document.createElement("span");
     mainText.textContent = formatted;
     const statusSpan = document.createElement("span");
     statusSpan.className = "status-text";
     statusSpan.textContent = statusText;

     li.appendChild(mainText);
     li.appendChild(statusSpan);

     if (status === "available") {
      li.addEventListener("click", () => {
       // On selecting an available slot, add to cart with schedule info and close modal
       addToCart(name, price, formatted);
       alert(`Agendado: ${name} para ${formatted}`);
       closeSchedule();
      });
      li.addEventListener("keydown", (e) => {
       if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        li.click();
       }
      });
     } else {
      // For booked or busy slots, disable click
      li.style.cursor = "not-allowed";
      li.setAttribute("aria-disabled", "true");
     }
     scheduleList.appendChild(li);
    });

    // Show modal
    scheduleModal.classList.add("show");
    scheduleModal.focus();
   }

   // Close schedule modal
   function closeSchedule() {
    const scheduleModal = document.getElementById("scheduleModal");
    scheduleModal.classList.remove("show");
   }

   // Close schedule modal button
   document.getElementById("closeScheduleBtn").addEventListener("click", closeSchedule);

   // Close modal on outside click
   document.getElementById("scheduleModal").addEventListener("click", (e) => {
    if (e.target === e.currentTarget) {
     closeSchedule();
    }
   });

   // Load items data from itens.json and render cards
   async function loadItemsData() {
    try {
     const response = await fetch('itens.json');
     if (!response.ok) throw new Error('Erro ao carregar itens.json');
     const data = await response.json();
     return data;
    } catch (error) {
     console.error(error);
     return { services: [], barberShop: [], promo: [], navButtons: [] };
    }
   }

   // Render navigation buttons
   function renderNavButtons(buttons) {
    const nav = document.getElementById('navButtons');
    nav.innerHTML = '';
    buttons.forEach(btn => {
     const button = document.createElement('button');
     button.className = 'flex items-center gap-1 bg-black rounded-full px-1.5 py-1 min-w-[70px] shrink-0';
     if (btn.text.length > 8) button.classList.add('min-w-[90px]');
     button.title = btn.text;
     button.type = 'button';

     const iconDiv = document.createElement('div');
     iconDiv.className = 'w-6 h-6 rounded-full overflow-hidden flex items-center justify-center text-[6px] font-semibold text-black';

     const img = document.createElement('img');
     img.src = btn.icon;
     img.alt = `Ícone ${btn.text}`;
     img.className = 'w-4 h-4 object-contain rounded-full';

     iconDiv.appendChild(img);
     button.appendChild(iconDiv);

     const span = document.createElement('span');
     span.className = 'text-white font-bold text-[10px] leading-none';
     span.textContent = btn.text;

     button.appendChild(span);
     nav.appendChild(button);
    });
   }

   // Render cards for a section
   function renderCards(containerId, items, isService = false) {
    const container = document.getElementById(containerId);
    container.innerHTML = '';
    items.forEach(item => {
     const card = document.createElement('div');
     card.className = 'bg-white rounded-lg p-1.5 w-24 flex flex-col items-center gap-0.5 shrink-0 relative cursor-pointer';

     // Image
     const img = document.createElement('img');
     img.src = item.image;
     img.alt = item.name;
     img.className = 'w-12 h-12 object-contain rounded-full';
     card.appendChild(img);

     // Name
     const pName = document.createElement('p');
     pName.className = 'text-center font-semibold text-black text-[9px] leading-tight mt-1 mb-1';
     pName.innerHTML = isService ? item.name.replace(/\s/g, '<br/>') : item.name;
     card.appendChild(pName);

     if (isService) {
      // Price info for services
      const pPriceInfo = document.createElement('p');
      pPriceInfo.className = 'text-center text-[7px] text-gray-600 leading-tight mb-1';
      pPriceInfo.innerHTML = `De <span class="line-through text-red-600">R$${item.oldPrice}</span> por:`;
      card.appendChild(pPriceInfo);

      // Button AGENDAR
      const btn = document.createElement('button');
      btn.className = 'w-full rounded-full text-[8px] font-bold text-white bg-gradient-to-r from-cyan-600 to-lime-400 py-1';
      btn.type = 'button';
      btn.innerHTML = `R$${item.price} <span class="ml-0.5">AGENDAR</span>`;
      btn.addEventListener('click', () => showSchedule(item.name, item.price));
      card.appendChild(btn);
     } else {
      // Price info for products
      const btn = document.createElement('button');
      btn.className = 'w-full rounded-full text-[9px] font-bold text-white bg-gradient-to-r from-cyan-600 to-lime-400 py-1';
      btn.type = 'button';
      btn.textContent = `R$${item.price} Adicionar`;
      btn.addEventListener('click', () => addToCart(item.name, item.price));
      card.appendChild(btn);
     }

     container.appendChild(card);
    });
   }

   // Initialize page by loading items.json and rendering
   async function initPage() {
    const data = await loadItemsData();
    renderNavButtons(data.navButtons || []);
    renderCards('servicesContainer', data.services || [], true);
    renderCards('barberShopContainer', data.barberShop || [], false);
    renderCards('promoContainer', data.promo || [], false);
   }

   // Initialize cart UI
   updateCartUI();

   // Initialize page content
   initPage();

   // Cart icon click to toggle sidebar
   document.getElementById("cartIcon").addEventListener("click", () => {
    const sidebar = document.getElementById("cartSidebar");
    const overlay = document.getElementById("sidebarOverlay");
    const footerEl = document.getElementById("pageFooter");
    if (sidebar.classList.contains("open")) {
     sidebar.classList.remove("open");
     overlay.classList.remove("show");
     footerEl.style.opacity = "1";
     footerEl.style.pointerEvents = "auto";
    } else {
     sidebar.classList.add("open");
     overlay.classList.add("show");
     footerEl.style.opacity = "0";
     footerEl.style.pointerEvents = "none";
     sidebar.focus();
    }
   });

   // Close sidebar
   document.getElementById("closeCartBtn").addEventListener("click", () => {
    const sidebar = document.getElementById("cartSidebar");
    const overlay = document.getElementById("sidebarOverlay");
    const footerEl = document.getElementById("pageFooter");
    sidebar.classList.remove("open");
    overlay.classList.remove("show");
    footerEl.style.opacity = "1";
    footerEl.style.pointerEvents = "auto";
   });

   // Close sidebar on overlay click
   document.getElementById("sidebarOverlay").addEventListener("click", () => {
    const sidebar = document.getElementById("cartSidebar");
    const overlay = document.getElementById("sidebarOverlay");
    const footerEl = document.getElementById("pageFooter");
    sidebar.classList.remove("open");
    overlay.classList.remove("show");
    footerEl.style.opacity = "1";
    footerEl.style.pointerEvents = "auto";
   });

   // View Cart button toggles sidebar
   document.getElementById("viewCartBtn").addEventListener("click", () => {
    const sidebar = document.getElementById("cartSidebar");
    const overlay = document.getElementById("sidebarOverlay");
    const footerEl = document.getElementById("pageFooter");
    if (sidebar.classList.contains("open")) {
     sidebar.classList.remove("open");
     overlay.classList.remove("show");
     footerEl.style.opacity = "1";
     footerEl.style.pointerEvents = "auto";
    } else {
     sidebar.classList.add("open");
     overlay.classList.add("show");
     footerEl.style.opacity = "0";
     footerEl.style.pointerEvents = "none";
     sidebar.focus();
    }
   });
  </script>
 </body>
</html>
